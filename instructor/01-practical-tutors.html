<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Outbreak analytics with R: </title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css"><script src="../assets/scripts.js" type="text/javascript"></script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-XZ471458FQ');
    </script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/epiverse-trace/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicons/epiverse-trace/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="../favicons/epiverse-trace/favicon-16x16.png"><link rel="manifest" href="../favicons/epiverse-trace/site.webmanifest"><link rel="mask-icon" href="../favicons/epiverse-trace/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav epiverse-trace"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="epiverse-trace-logo" alt="epiverse-trace" src="../assets/images/epiverse-trace-logo.svg"><span class="badge text-bg-danger" style="background-color: #FF4955; border-radius: 5px">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='../01-practical-tutors.html';">Learner View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav epiverse-trace" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="epiverse-trace" src="../assets/images/epiverse-trace-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Outbreak analytics with R
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Outbreak analytics with R
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="01-practical-tutors.html"></a></li><li><a class="dropdown-item" href="02-practical-tutors.html"></a></li><li><a class="dropdown-item" href="03-practical-tutors.html"></a></li><li><a class="dropdown-item" href="04-practical-tutors.html"></a></li><hr><li><a class="dropdown-item" href="reference.html">Glossary of Terms: Epiverse-TRACE</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Outbreak analytics with R
</div>

<aside class="col-md-12 lesson-progress"><div style="width: NA%" class="percentage">
    NA%
  </div>
  <div class="progress epiverse-trace">
    <div class="progress-bar epiverse-trace" role="progressbar" style="width: NA%" aria-valuenow="NA" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../01-practical-tutors.html">Learner View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="delays-introduction.html">1. Introduction to outbreak analytics</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="delays-distribution.html">2. Introduction to delays</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <li><a href="01-practical-tutors.html"></a></li><li><a href="02-practical-tutors.html"></a></li><li><a href="03-practical-tutors.html"></a></li><li><a href="04-practical-tutors.html"></a></li><hr><li><a class="dropdown-item" href="reference.html">Glossary of Terms: Epiverse-TRACE</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/index.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/index.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/index.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Home
        </a>
        <a class="chapter-link float-end" href="../instructor/index.html" rel="next">
          Home
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1></h1>
        <p>Last updated on 2025-05-13 |

        <a href="https://github.com/epiverse-trace/tutorials/edit/main/instructors/01-practical-tutors.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>





        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="section level1">
<h1 id="week-1-clean-validate-linelist-and-plot-epicurves">Week 1: Clean, validate linelist, and plot epicurves<a class="anchor" aria-label="anchor" href="#week-1-clean-validate-linelist-and-plot-epicurves"></a></h1>
<!-- visible for instructors only -->
<!-- practical-week.md is generated from practical-week.qmd. Please edit that file -->
<!-- commit .md and .qmd files together -->
<!-- does not work for instructors text messages -->
<!-- works for text on html and MD only -->
<p>This practical is based in the following tutorial episodes:</p>
<ul><li><a href="https://epiverse-trace.github.io/tutorials-early/clean-data.html" class="external-link uri">https://epiverse-trace.github.io/tutorials-early/clean-data.html</a></li>
<li><a href="https://epiverse-trace.github.io/tutorials-early/validate.html" class="external-link uri">https://epiverse-trace.github.io/tutorials-early/validate.html</a></li>
<li><a href="https://epiverse-trace.github.io/tutorials-early/describe-cases.html" class="external-link uri">https://epiverse-trace.github.io/tutorials-early/describe-cases.html</a></li>
</ul><p>Welcome!</p>
<ul><li>A reminder of our <a href="https://github.com/epiverse-trace/.github/blob/main/CODE_OF_CONDUCT.md" class="external-link">Code
of Conduct</a>. If you experience or witness unacceptable behaviour, or
have any other concerns, please notify the course organisers or host of
the event. To report an issue involving one of the organisers, please
use the <a href="https://reportandsupport.lshtm.ac.uk/" class="external-link">LSHTM’s Report
and Support tool</a>.</li>
</ul></div>
<div class="section level1">
<h1 id="read-this-first">Read This First<a class="anchor" aria-label="anchor" href="#read-this-first"></a></h1>
<!-- visible for learners and instructors at practical -->
<p>Instructions:</p>
<ul><li>Each <code>Activity</code> has five sections: the Goal, Questions,
Inputs, Your Code, and Your Answers.</li>
<li>Solve each Activity in the corresponding <code>.R</code> file
mentioned in the <code>Your Code</code> section.</li>
<li>Paste your figure and table outputs and write your answer to the
questions in the section <code>Your Answers</code>.</li>
<li>Choose one group member to share your group’s results with the rest
of the participants.</li>
</ul><p>During the practical, instead of simply copying and pasting, we
encourage learners to increase their fluency writing R by using:</p>
<ul><li>The double-colon notation, e.g. <code>package::function()</code> to
specify which package a function comes from, avoid namespace conflicts,
and find functions using keywords.</li>
<li>Tab key <kbd>↹</kbd> to <a href="https://support.posit.co/hc/en-us/articles/205273297-Code-Completion-in-the-RStudio-IDE" class="external-link">autocomplete
package or function names</a> and <a href="https://docs.posit.co/ide/user/ide/guide/code/console.html" class="external-link">display
possible arguments</a>.</li>
<li>
<a href="https://docs.posit.co/ide/user/ide/guide/code/execution.html" class="external-link">Execute
one line of code</a> or multiple lines connected by the pipe operator
(<code>%&gt;%</code>) by placing the cursor in the code of interest and
pressing the <code>Ctrl</code>+<code>Enter</code>.</li>
<li>
<a href="https://positron.posit.co/keyboard-shortcuts.html#r-shortcuts" class="external-link">R
shortcuts</a> to insert the pipe operator (<code>%&gt;%</code>) using
<code>Ctrl/Cmd</code>+<code>Shift</code>+<code>M</code>, or insert the
assignment operator (<code>&lt;-</code>) using
<code>Alt/Option</code>+<code>-</code>.
<!-- - Get [help yourself with R](https://www.r-project.org/help.html) using the `help()` function or `?` operator to access the function reference manual. -->
</li>
</ul><p>If your local configuration was not possible to setup:</p>
<ul><li>Create one copy of the <a href="https://posit.cloud/spaces/609790/join?access_code=hPM1tIeKt5ax_Y-P0lMGVUGqzFPNH4wxkKSzXZYb" class="external-link">Posit
Cloud RStudio project</a>.</li>
</ul><div class="section level2">
<h2 id="paste-your-error-messages-here">Paste your !Error messages here<a class="anchor" aria-label="anchor" href="#paste-your-error-messages-here"></a></h2>
</div>
</div>
<div class="section level1">
<h1 id="practical">Practical<a class="anchor" aria-label="anchor" href="#practical"></a></h1>
<p>This practical has two activities.</p>
<div class="section level2">
<h2 id="activity-1-clean-and-standardize-raw-data">Activity 1: Clean and standardize raw data<a class="anchor" aria-label="anchor" href="#activity-1-clean-and-standardize-raw-data"></a></h2>
<p>Get a clean and standardized data frame using the following available
inputs:</p>
<ul><li>Raw messy data frame in CSV format</li>
</ul><p>As a group, Write your answers to these questions:</p>
<ul><li>Diagnose the raw data. What data cleaning operations need to be
performed on the dataset? Write all of them before writing the
code.</li>
<li>What time unit best describes the time span to calculate?</li>
<li>Print the report: How would you communicate these results to a
decision-maker?</li>
<li>Compare: What differences do you identify from other group outputs?
(if available)</li>
</ul><div class="section level3">
<h3 id="inputs">Inputs<a class="anchor" aria-label="anchor" href="#inputs"></a></h3>
<table style="width:100%;" class="table"><colgroup><col width="3%"><col width="8%"><col width="44%"><col width="26%"><col width="16%"></colgroup><thead><tr class="header"><th>Group</th>
<th>Data</th>
<th>Link</th>
<th>Calculate time span</th>
<th>Categorize time span</th>
</tr></thead><tbody><tr class="odd"><td>1</td>
<td>Small linelist</td>
<td><a href="https://epiverse-trace.github.io/tutorials-early/data/linelist-date_of_birth.csv" class="external-link uri">https://epiverse-trace.github.io/tutorials-early/data/linelist-date_of_birth.csv</a></td>
<td>Age as of today</td>
<td>breaks = c(0, 20, 35, 60, 80)</td>
</tr><tr class="even"><td>2</td>
<td>Large linelist</td>
<td><a href="https://epiverse-trace.github.io/tutorials-early/data/covid_simulated_data.csv" class="external-link uri">https://epiverse-trace.github.io/tutorials-early/data/covid_simulated_data.csv</a></td>
<td>Delay from onset of symptoms to the time of death</td>
<td>breaks = c(0, 10, 15, 40)</td>
</tr><tr class="odd"><td>3</td>
<td>Serology data</td>
<td><a href="https://epiverse-trace.github.io/tutorials-early/data/delta_full-messy.csv" class="external-link uri">https://epiverse-trace.github.io/tutorials-early/data/delta_full-messy.csv</a></td>
<td>Time from last exposure to vaccine</td>
<td>breaks = c(0, 30, 100, 600)</td>
</tr></tbody></table></div>
</div>
<div class="section level2">
<h2 id="activity-2-validate-linelist-and-plot-epicurve">Activity 2: Validate linelist and plot epicurve<a class="anchor" aria-label="anchor" href="#activity-2-validate-linelist-and-plot-epicurve"></a></h2>
<p>Get a validated linelist and incidence plot using the following
available inputs:</p>
<ul><li>Clean data frame object</li>
</ul><p>As a group, Write your answers to these questions:</p>
<ul><li>In the validation step, Do you need to allow for extra variable
names and types?</li>
<li>What is the most apprioriate time unit to aggregate the incidence
plot, based on visual inspection?</li>
<li>Does using arguments like <code>fill</code>,
<code>show_cases</code>, <code>angle</code>, <code>n_breaks</code>
improve the incidence plot?</li>
<li>Interpret: How would you communicate these results to a
decision-maker?</li>
<li>Compare: What differences do you identify from other group outputs?
(if available)</li>
</ul><div class="section level3">
<h3 id="inputs-1">Inputs<a class="anchor" aria-label="anchor" href="#inputs-1"></a></h3>
<p>Use outputs from activity 1.</p>
</div>
<div class="section level3">
<h3 id="solution">Solution<a class="anchor" aria-label="anchor" href="#solution"></a></h3>
<!-- visible for instructors and learners after practical (solutions) -->
<div class="section level4">
<h4 id="code">Code<a class="anchor" aria-label="anchor" href="#code"></a></h4>
<div class="section level5">
<h5 id="sample-1">Sample 1<a class="anchor" aria-label="anchor" href="#sample-1"></a></h5>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load packages ----------------------------------------------------------</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">cleanepi</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">linelist</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">incidence2</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Adapt the data dictionary ----------------------------------------------</span></span>
<span><span class="co"># wait until have more information</span></span>
<span><span class="va">dat_dictionary</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu">tribble</span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">options</span>,  <span class="op">~</span><span class="va">values</span>,        <span class="op">~</span><span class="va">grp</span>, <span class="op">~</span><span class="va">orders</span>,</span>
<span>       <span class="st">"1"</span>,   <span class="st">"male"</span>, <span class="st">"sex_fem_2"</span>,      <span class="fl">1L</span>,</span>
<span>       <span class="st">"2"</span>, <span class="st">"female"</span>, <span class="st">"sex_fem_2"</span>,      <span class="fl">2L</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">dat_dictionary</span></span>
<span></span>
<span><span class="co"># Read raw data ----------------------------------------------------------</span></span>
<span><span class="va">dat_raw</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu">read_csv</span><span class="op">(</span></span>
<span>  <span class="st">"https://epiverse-trace.github.io/tutorials-early/data/linelist-date_of_birth.csv"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">dat_raw</span></span>
<span></span>
<span></span>
<span><span class="co"># Clean and standardize data ---------------------------------------------</span></span>
<span></span>
<span><span class="co"># what steps you required to have clean data?</span></span>
<span><span class="va">dat_clean</span> <span class="op">&lt;-</span> <span class="va">dat_raw</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># standardize column names and dates</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">standardize_column_names</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">standardize_dates</span><span class="op">(</span></span>
<span>    target_columns <span class="op">=</span> <span class="fu">c</span><span class="op">(</span></span>
<span>      <span class="st">"date_of_admission"</span>,</span>
<span>      <span class="st">"date_of_birth"</span>,</span>
<span>      <span class="st">"date_first_pcr_positive_test"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">check_date_sequence</span><span class="op">(</span></span>
<span>    target_columns <span class="op">=</span> <span class="fu">c</span><span class="op">(</span></span>
<span>      <span class="st">"date_of_birth"</span>,</span>
<span>      <span class="st">"date_first_pcr_positive_test"</span>,</span>
<span>      <span class="st">"date_of_admission"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># using data_dictionary requires valid missing entries</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">replace_missing_values</span><span class="op">(</span></span>
<span>    target_columns <span class="op">=</span> <span class="st">"sex_fem_2"</span>,</span>
<span>    na_strings <span class="op">=</span> <span class="st">"-99"</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">clean_using_dictionary</span><span class="op">(</span>dictionary <span class="op">=</span> <span class="va">dat_dictionary</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">remove_constants</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">remove_duplicates</span><span class="op">(</span></span>
<span>    target_columns <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"study_id"</span>, <span class="st">"date_of_birth"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">dat_clean</span></span>
<span></span>
<span></span>
<span><span class="co"># Create categorical variable --------------------------------------------</span></span>
<span></span>
<span><span class="co"># what time span unit better describe age?</span></span>
<span><span class="va">dat_timespan</span> <span class="op">&lt;-</span> <span class="va">dat_clean</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># calculate the age in 'years' and return the remainder in 'months'</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">timespan</span><span class="op">(</span></span>
<span>    target_column <span class="op">=</span> <span class="st">"date_of_birth"</span>,</span>
<span>    end_date <span class="op">=</span> <span class="fu">Sys.Date</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    span_unit <span class="op">=</span> <span class="st">"years"</span>,</span>
<span>    span_column_name <span class="op">=</span> <span class="st">"age_in_years"</span>,</span>
<span>    span_remainder_unit <span class="op">=</span> <span class="st">"months"</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># skimr::skim(age_in_years)</span></span>
<span>  <span class="co"># categorize the age numerical variable</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">mutate</span><span class="op">(</span></span>
<span>    age_category <span class="op">=</span> <span class="fu">base</span><span class="fu">::</span><span class="fu">cut</span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">age_in_years</span>,</span>
<span>      breaks <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">20</span>, <span class="fl">35</span>, <span class="fl">60</span>, <span class="fl">80</span><span class="op">)</span>,</span>
<span>      include.lowest <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>      right <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="co"># age_category = Hmisc::cut2(x = age_in_years,cuts = c(20,35,60))</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">dat_timespan</span></span>
<span></span>
<span></span>
<span><span class="co"># Validate linelist ------------------------------------------------------</span></span>
<span></span>
<span><span class="co"># activate Error message</span></span>
<span><span class="fu">linelist</span><span class="fu">::</span><span class="fu">lost_tags_action</span><span class="op">(</span>action <span class="op">=</span> <span class="st">"error"</span><span class="op">)</span></span>
<span><span class="co"># linelist::lost_tags_action(action = "warning")</span></span>
<span></span>
<span><span class="co"># print tags types, names, and data to guide make_linelist</span></span>
<span><span class="fu">linelist</span><span class="fu">::</span><span class="fu">tags_types</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">linelist</span><span class="fu">::</span><span class="fu">tags_names</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">dat_timespan</span></span>
<span></span>
<span><span class="co"># does the age variable pass the validation step?</span></span>
<span><span class="va">dat_validate</span> <span class="op">&lt;-</span> <span class="va">dat_timespan</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># tag variables</span></span>
<span>  <span class="fu">linelist</span><span class="fu">::</span><span class="fu">make_linelist</span><span class="op">(</span></span>
<span>    id <span class="op">=</span> <span class="st">"study_id"</span>,</span>
<span>    date_reporting <span class="op">=</span> <span class="st">"date_first_pcr_positive_test"</span>,</span>
<span>    gender <span class="op">=</span> <span class="st">"sex_fem_2"</span>,</span>
<span>    <span class="co"># age = "age_category", # does not pass validation</span></span>
<span>    age <span class="op">=</span> <span class="st">"age_in_years"</span>,</span>
<span>    occupation <span class="op">=</span> <span class="st">"age_category"</span> <span class="co"># (downstream implications!)</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># validate linelist</span></span>
<span>  <span class="fu">linelist</span><span class="fu">::</span><span class="fu">validate_linelist</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># safeguard</span></span>
<span>  <span class="co"># TRY using</span></span>
<span>  <span class="co"># dplyr::select(study_id, sex_fem_2, age_category)</span></span>
<span>  <span class="co"># CONSEQUENCE</span></span>
<span>  <span class="co"># You get an ERROR notification due to loosing tags</span></span>
<span>  <span class="co"># INSTEAD</span></span>
<span>  <span class="co"># get a dataframe with all validated tags</span></span>
<span>  <span class="fu">linelist</span><span class="fu">::</span><span class="fu">tags_df</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># relevant change: the variable names CHANGE to tag names!</span></span>
<span><span class="co"># (can simplify downstream analysis!)</span></span>
<span><span class="va">dat_validate</span></span>
<span></span>
<span></span>
<span><span class="co"># Create incidence -------------------------------------------------------</span></span>
<span></span>
<span><span class="co"># what is the most appropriate time-aggregate (days, months) to plot?</span></span>
<span><span class="va">dat_incidence</span> <span class="op">&lt;-</span> <span class="va">dat_validate</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># transform from individual-level to time-aggregate</span></span>
<span>  <span class="fu">incidence2</span><span class="fu">::</span><span class="fu">incidence</span><span class="op">(</span></span>
<span>    date_index <span class="op">=</span> <span class="st">"date_reporting"</span>, <span class="co">#"date_first_pcr_positive_test",</span></span>
<span>    groups <span class="op">=</span> <span class="st">"occupation"</span>, <span class="co">#"age_category", # change to sex, ...</span></span>
<span>    interval <span class="op">=</span> <span class="st">"month"</span>, <span class="co"># change to days, weeks, ...</span></span>
<span>    complete_dates <span class="op">=</span> <span class="cn">TRUE</span> <span class="co"># relevant to downstream analysis [time-series data]</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">dat_incidence</span></span>
<span></span>
<span></span>
<span><span class="co"># Plot epicurve ----------------------------------------------------------</span></span>
<span></span>
<span><span class="co"># does using arguments like 'fill' or 'show_cases' improve the plot?</span></span>
<span><span class="va">dat_incidence</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">plot</span><span class="op">(</span></span>
<span>    fill <span class="op">=</span> <span class="st">"occupation"</span>, <span class="co"># "age_category",</span></span>
<span>    show_cases <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    angle <span class="op">=</span> <span class="fl">45</span>,</span>
<span>    n_breaks <span class="op">=</span> <span class="fl">5</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># find plot() arguments at ?incidence2:::plot.incidence2()</span></span></code></pre>
</div>
</div>
<div class="section level5">
<h5 id="sample-2">Sample 2<a class="anchor" aria-label="anchor" href="#sample-2"></a></h5>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load packages ----------------------------------------------------------</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">cleanepi</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">linelist</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">incidence2</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Adapt the data dictionary ----------------------------------------------</span></span>
<span><span class="co"># wait until have more information</span></span>
<span><span class="va">dat_dictionary</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu">tribble</span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">options</span>,  <span class="op">~</span><span class="va">values</span>,  <span class="op">~</span><span class="va">grp</span>, <span class="op">~</span><span class="va">orders</span>,</span>
<span>       <span class="st">"1"</span>,   <span class="st">"male"</span>, <span class="st">"sex"</span>,      <span class="fl">1L</span>,</span>
<span>       <span class="st">"2"</span>, <span class="st">"female"</span>, <span class="st">"sex"</span>,      <span class="fl">2L</span>,</span>
<span>       <span class="st">"M"</span>,   <span class="st">"male"</span>, <span class="st">"sex"</span>,      <span class="fl">3L</span>,</span>
<span>       <span class="st">"F"</span>, <span class="st">"female"</span>, <span class="st">"sex"</span>,      <span class="fl">4L</span>,</span>
<span>       <span class="st">"m"</span>,   <span class="st">"male"</span>, <span class="st">"sex"</span>,      <span class="fl">5L</span>,</span>
<span>       <span class="st">"f"</span>, <span class="st">"female"</span>, <span class="st">"sex"</span>,      <span class="fl">6L</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">dat_dictionary</span></span>
<span></span>
<span><span class="co"># Read raw data ----------------------------------------------------------</span></span>
<span><span class="va">dat_raw</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu">read_csv</span><span class="op">(</span></span>
<span>  <span class="st">"https://epiverse-trace.github.io/tutorials-early/data/covid_simulated_data.csv"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">dat_raw</span></span>
<span></span>
<span></span>
<span><span class="co"># Clean and standardize data ---------------------------------------------</span></span>
<span></span>
<span><span class="co"># what steps you required to have clean data?</span></span>
<span><span class="va">dat_clean</span> <span class="op">&lt;-</span> <span class="va">dat_raw</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">standardize_column_names</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">standardize_dates</span><span class="op">(</span></span>
<span>    target_columns <span class="op">=</span> <span class="fu">c</span><span class="op">(</span></span>
<span>      <span class="st">"date_onset"</span>,</span>
<span>      <span class="st">"date_admission"</span>,</span>
<span>      <span class="st">"date_outcome"</span>,</span>
<span>      <span class="st">"date_first_contact"</span>,</span>
<span>      <span class="st">"date_last_contact"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">check_date_sequence</span><span class="op">(</span></span>
<span>    target_columns <span class="op">=</span> <span class="fu">c</span><span class="op">(</span></span>
<span>      <span class="st">"date_first_contact"</span>,</span>
<span>      <span class="st">"date_last_contact"</span>,</span>
<span>      <span class="st">"date_onset"</span>,</span>
<span>      <span class="st">"date_admission"</span>,</span>
<span>      <span class="st">"date_outcome"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">convert_to_numeric</span><span class="op">(</span>target_columns <span class="op">=</span> <span class="st">"age"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># dplyr::count(sex)</span></span>
<span>  <span class="co"># using data_dictionary requires valid missing entries</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">replace_missing_values</span><span class="op">(</span></span>
<span>    target_columns <span class="op">=</span> <span class="st">"sex"</span>,</span>
<span>    na_strings <span class="op">=</span> <span class="st">"-99"</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">clean_using_dictionary</span><span class="op">(</span>dictionary <span class="op">=</span> <span class="va">dat_dictionary</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">remove_constants</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">remove_duplicates</span><span class="op">(</span></span>
<span>    target_columns <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"case_id"</span>, <span class="st">"case_name"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">dat_clean</span></span>
<span></span>
<span></span>
<span><span class="co"># Create time span variable ----------------------------------------------</span></span>
<span></span>
<span><span class="co"># what time span unit better describe delay from onset to death?</span></span>
<span><span class="va">dat_timespan</span> <span class="op">&lt;-</span> <span class="va">dat_clean</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># calculate the time delay from 'onset' to 'death' in 'days'</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">timespan</span><span class="op">(</span></span>
<span>    target_column <span class="op">=</span> <span class="st">"date_onset"</span>,</span>
<span>    end_date <span class="op">=</span> <span class="st">"date_outcome"</span>,</span>
<span>    span_unit <span class="op">=</span> <span class="st">"days"</span>,</span>
<span>    span_column_name <span class="op">=</span> <span class="st">"delay_onset_death"</span>,</span>
<span>    span_remainder_unit <span class="op">=</span> <span class="cn">NULL</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># skimr::skim(delay_onset_death)</span></span>
<span>  <span class="co"># categorize the delay numerical variable</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">mutate</span><span class="op">(</span></span>
<span>    delay_category <span class="op">=</span> <span class="fu">base</span><span class="fu">::</span><span class="fu">cut</span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">delay_onset_death</span>,</span>
<span>      breaks <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10</span>, <span class="fl">15</span>, <span class="fl">40</span><span class="op">)</span>,</span>
<span>      include.lowest <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>      right <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="co"># age_category = Hmisc::cut2(x = age_in_years,cuts = c(20,35,60))</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">dat_timespan</span></span>
<span></span>
<span></span>
<span><span class="co"># Validate linelist ------------------------------------------------------</span></span>
<span></span>
<span><span class="co"># activate Error message</span></span>
<span><span class="fu">linelist</span><span class="fu">::</span><span class="fu">lost_tags_action</span><span class="op">(</span>action <span class="op">=</span> <span class="st">"error"</span><span class="op">)</span></span>
<span><span class="co"># linelist::lost_tags_action(action = "warning")</span></span>
<span></span>
<span><span class="co"># print tags types, names, and data to guide make_linelist</span></span>
<span><span class="fu">linelist</span><span class="fu">::</span><span class="fu">tags_types</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">linelist</span><span class="fu">::</span><span class="fu">tags_names</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">dat_timespan</span></span>
<span></span>
<span><span class="co"># does the age variable pass the validation step?</span></span>
<span><span class="va">dat_validate</span> <span class="op">&lt;-</span> <span class="va">dat_timespan</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># tag variables</span></span>
<span>  <span class="fu">linelist</span><span class="fu">::</span><span class="fu">make_linelist</span><span class="op">(</span></span>
<span>    id <span class="op">=</span> <span class="st">"case_id"</span>,</span>
<span>    date_onset <span class="op">=</span> <span class="st">"date_onset"</span>,</span>
<span>    gender <span class="op">=</span> <span class="st">"sex"</span>,</span>
<span>    age <span class="op">=</span> <span class="st">"age"</span>,</span>
<span>    outcome <span class="op">=</span> <span class="st">"outcome"</span>,</span>
<span>    occupation <span class="op">=</span> <span class="st">"delay_category"</span> <span class="co"># (downstream implications!)</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># validate linelist</span></span>
<span>  <span class="fu">linelist</span><span class="fu">::</span><span class="fu">validate_linelist</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># safeguard</span></span>
<span>  <span class="co"># TRY using</span></span>
<span>  <span class="co"># dplyr::select(case_id, date_onset, sex)</span></span>
<span>  <span class="co"># CONSEQUENCE</span></span>
<span>  <span class="co"># You get an ERROR notification due to loosing tags</span></span>
<span>  <span class="co"># INSTEAD</span></span>
<span>  <span class="co"># get a dataframe with all validated tags</span></span>
<span>  <span class="fu">linelist</span><span class="fu">::</span><span class="fu">tags_df</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># relevant change: the variable names CHANGE to tag names!</span></span>
<span><span class="co"># (can simplify downstream analysis!)</span></span>
<span><span class="va">dat_validate</span></span>
<span></span>
<span></span>
<span><span class="co"># Create incidence -------------------------------------------------------</span></span>
<span></span>
<span><span class="co"># what is the most appropriate time-aggregate (days, months) to plot?</span></span>
<span><span class="va">dat_incidence</span> <span class="op">&lt;-</span> <span class="va">dat_validate</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># transform from individual-level to time-aggregate</span></span>
<span>  <span class="fu">incidence2</span><span class="fu">::</span><span class="fu">incidence</span><span class="op">(</span></span>
<span>    date_index <span class="op">=</span> <span class="st">"date_onset"</span>,</span>
<span>    groups <span class="op">=</span> <span class="st">"outcome"</span>, <span class="co">#"age_category", # change to sex, ...</span></span>
<span>    interval <span class="op">=</span> <span class="st">"day"</span>, <span class="co"># change to days, weeks, ...</span></span>
<span>    complete_dates <span class="op">=</span> <span class="cn">TRUE</span> <span class="co"># relevant to downstream analysis [time-series data]</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">dat_incidence</span></span>
<span></span>
<span></span>
<span><span class="co"># Plot epicurve ----------------------------------------------------------</span></span>
<span></span>
<span><span class="co"># does using arguments like 'fill' or 'show_cases' improve the plot?</span></span>
<span><span class="va">dat_incidence</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">plot</span><span class="op">(</span></span>
<span>    angle <span class="op">=</span> <span class="fl">45</span>,</span>
<span>    n_breaks <span class="op">=</span> <span class="fl">5</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># find plot() arguments at ?incidence2:::plot.incidence2()</span></span></code></pre>
</div>
</div>
<div class="section level5">
<h5 id="sample-3">Sample 3<a class="anchor" aria-label="anchor" href="#sample-3"></a></h5>
<blockquote>
<p>Group 3 should investigate about how the argument
<code>allow_extra = TRUE</code> us used in this howto entry <a href="https://epiverse-trace.github.io/howto/analyses/describe_cases/cleanepi-linelist-incidence2-stratified.html" class="external-link uri">https://epiverse-trace.github.io/howto/analyses/describe_cases/cleanepi-linelist-incidence2-stratified.html</a></p>
</blockquote>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load packages ----------------------------------------------------------</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">cleanepi</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">linelist</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">incidence2</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Read raw data ----------------------------------------------------------</span></span>
<span><span class="va">dat_raw</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu">read_csv</span><span class="op">(</span><span class="st">"https://epiverse-trace.github.io/tutorials-early/data/delta_full-messy.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dat_raw</span></span>
<span></span>
<span></span>
<span><span class="co"># Clean and standardize data ---------------------------------------------</span></span>
<span><span class="va">dat_clean</span> <span class="op">&lt;-</span> <span class="va">dat_raw</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># cleanepi</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">standardize_column_names</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">standardize_dates</span><span class="op">(</span>target_columns <span class="op">=</span> <span class="st">"date"</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co">#</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">convert_to_numeric</span><span class="op">(</span>target_columns <span class="op">=</span> <span class="st">"exp_num"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">check_date_sequence</span><span class="op">(</span></span>
<span>    target_columns <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"last_exp_date"</span>, <span class="st">"date"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">dat_clean</span></span>
<span></span>
<span></span>
<span><span class="co"># Create time span variable ----------------------------------------------</span></span>
<span></span>
<span><span class="co"># what time span unit better describe 'time' from 'last exposure' to 'date'?</span></span>
<span><span class="va">dat_timespan</span> <span class="op">&lt;-</span> <span class="va">dat_clean</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># cleanepi::print_report()</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">timespan</span><span class="op">(</span></span>
<span>    target_column <span class="op">=</span> <span class="st">"last_exp_date"</span>,</span>
<span>    end_date <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>    span_unit <span class="op">=</span> <span class="st">"days"</span>,</span>
<span>    span_column_name <span class="op">=</span> <span class="st">"t_since_last_exp"</span>,</span>
<span>    span_remainder_unit <span class="op">=</span> <span class="cn">NULL</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># skimr::skim(t_since_last_exp)</span></span>
<span>  <span class="co"># categorize the delay numerical variable</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">mutate</span><span class="op">(</span></span>
<span>    time_category <span class="op">=</span> <span class="fu">base</span><span class="fu">::</span><span class="fu">cut</span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">t_since_last_exp</span>,</span>
<span>      breaks <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">30</span>, <span class="fl">100</span>, <span class="fl">600</span><span class="op">)</span>,</span>
<span>      include.lowest <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>      right <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">dat_timespan</span></span>
<span></span>
<span></span>
<span><span class="co"># Validate linelist ------------------------------------------------------</span></span>
<span></span>
<span><span class="va">dat_validate</span> <span class="op">&lt;-</span> <span class="va">dat_timespan</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># tag with {linelist}</span></span>
<span>  <span class="fu">linelist</span><span class="fu">::</span><span class="fu">make_linelist</span><span class="op">(</span></span>
<span>    id <span class="op">=</span> <span class="st">"pid"</span>,</span>
<span>    occupation <span class="op">=</span> <span class="st">"time_category"</span>,</span>
<span>    allow_extra <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    last_exp_date <span class="op">=</span> <span class="st">"last_exp_date"</span>,</span>
<span>    t_since_last_exp <span class="op">=</span> <span class="st">"t_since_last_exp"</span>,</span>
<span>    last_vax_type <span class="op">=</span> <span class="st">"last_vax_type"</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># validate</span></span>
<span>  <span class="fu">linelist</span><span class="fu">::</span><span class="fu">validate_linelist</span><span class="op">(</span></span>
<span>    allow_extra <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    ref_types <span class="op">=</span> <span class="fu">linelist</span><span class="fu">::</span><span class="fu">tags_types</span><span class="op">(</span></span>
<span>      last_exp_date <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Date"</span><span class="op">)</span>,</span>
<span>      t_since_last_exp <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"numeric"</span><span class="op">)</span>,</span>
<span>      last_vax_type <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"character"</span><span class="op">)</span>,</span>
<span>      allow_extra <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># keep tags data frame</span></span>
<span>  <span class="fu">linelist</span><span class="fu">::</span><span class="fu">tags_df</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dat_validate</span></span>
<span></span>
<span></span>
<span><span class="co"># Create incidence -------------------------------------------------------</span></span>
<span></span>
<span><span class="va">dat_incidence</span> <span class="op">&lt;-</span> <span class="va">dat_validate</span> <span class="op">%&gt;%</span></span>
<span>    <span class="co"># aggregate</span></span>
<span>    <span class="fu">incidence2</span><span class="fu">::</span><span class="fu">incidence</span><span class="op">(</span></span>
<span>      date_index <span class="op">=</span> <span class="st">"last_exp_date"</span>,</span>
<span>      groups <span class="op">=</span> <span class="st">"last_vax_type"</span>, </span>
<span>      interval <span class="op">=</span> <span class="st">"month"</span>, <span class="co"># change: "day" or "week" etc</span></span>
<span>      complete_dates <span class="op">=</span> <span class="cn">TRUE</span> <span class="co"># relevant to downstream analysis [time-series data]</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="va">dat_incidence</span></span>
<span></span>
<span></span>
<span><span class="co"># Plot epicurve ----------------------------------------------------------</span></span>
<span></span>
<span><span class="va">dat_incidence</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># plot</span></span>
<span>  <span class="fu">plot</span><span class="op">(</span></span>
<span>    fill <span class="op">=</span> <span class="st">"last_vax_type"</span> <span class="co"># change to groups variable</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># find plot() arguments at ?incidence2:::plot.incidence2()</span></span></code></pre>
</div>
</div>
</div>
<div class="section level4">
<h4 id="outputs">Outputs<a class="anchor" aria-label="anchor" href="#outputs"></a></h4>
<table class="table"><thead><tr class="header"><th>Group</th>
<th>Output</th>
</tr></thead><tbody><tr class="odd"><td>1</td>
<td><img src="https://hackmd.io/_uploads/ry5d6xnA1e.png" alt="image" class="figure"></td>
</tr><tr class="even"><td>2</td>
<td><img src="https://hackmd.io/_uploads/SJ2f0e2Cyx.png" alt="image" class="figure"></td>
</tr><tr class="odd"><td>3</td>
<td><img src="https://hackmd.io/_uploads/H1-PRlhA1g.png" alt="image" class="figure"></td>
</tr></tbody></table></div>
<div class="section level4">
<h4 id="interpretation">Interpretation<a class="anchor" aria-label="anchor" href="#interpretation"></a></h4>
<p>Cleaning</p>
<ul><li>In small data frames, we can diagnose cleaning operations easier
than large data frames.</li>
<li>For example, in the large data frame, before cleaning the sex
variable with a data dictionary, we need to remove unconsistent missing
values. We can use <code>dplyr::count()</code> to find this issue.</li>
</ul><p>Validation</p>
<ul><li>Using the <code>linelist::tags_df()</code> output can keep stable
downstream analysis. Jointly with
<code>linelist::lost_tags_action(action = "error")</code> we can improve
the capacity to diagnose changes in the input data. This can prevent
getting misleading outputs from automatic daily code runs or dashboards
updates.</li>
</ul><p>Epicurve</p>
<ul><li>The argument <code>show_cases</code> can improve the visibility of
<code>fill</code> categorical variables when the amount of observed
cases is small.</li>
</ul></div>
</div>
</div>
</div>
<div class="section level1">
<h1 id="continue-your-learning-path">Continue your learning path<a class="anchor" aria-label="anchor" href="#continue-your-learning-path"></a></h1>
<!-- Suggest learners to Epiverse-TRACE documentation or external resources --->
<p>Explore the downstream analysis you can do with {incidence2}
outputs</p>
<ul><li><a href="https://www.reconverse.org/incidence2/doc/incidence2.html#sec:building-on-incidence2" class="external-link uri">https://www.reconverse.org/incidence2/doc/incidence2.html#sec:building-on-incidence2</a></li>
</ul><p>You can use <a href="https://seroanalytics.org/epikinetics/" class="external-link">{epikinetics}</a> to
estimate antibody kinetics. Explore this sample code:</p>
<ul><li><a href="https://epiverse-trace.github.io/tutorials-early/epikinetics-statistics.html" class="external-link uri">https://epiverse-trace.github.io/tutorials-early/epikinetics-statistics.html</a></li>
</ul></div>
<div class="section level1">
<h1 id="end">end<a class="anchor" aria-label="anchor" href="#end"></a></h1>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>



      </div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/index.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/index.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/index.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Home
        </a>
        <a class="chapter-link float-end" href="../instructor/index.html" rel="next">
          Home
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/epiverse-trace/tutorials/edit/main/instructors/01-practical-tutors.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/epiverse-trace/tutorials/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/epiverse-trace/tutorials/" class="external-link">Source</a></p>
				<p><a href="https://github.com/epiverse-trace/tutorials/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:andree.valle-campos@lshtm.ac.uk">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/epiverse-trace/sandpaper/tree/patch-renv-github-bug" class="external-link">sandpaper (0.16.11)</a>, <a href="https://github.com/carpentries/pegboard/tree/5e0d711121a581777d83cf270e298c933f112d52" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/epiverse-trace/varnish/tree/epiversetheme" class="external-link">varnish (1.0.5)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://epiverse-trace.github.io/tutorials/instructor/01-practical-tutors.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "forecasts, epidemic models, interventions",
  "name": "",
  "creativeWorkStatus": "active",
  "url": "https://epiverse-trace.github.io/tutorials/instructor/01-practical-tutors.html",
  "identifier": "https://epiverse-trace.github.io/tutorials/instructor/01-practical-tutors.html",
  "dateCreated": "2025-05-13",
  "dateModified": "2025-05-13",
  "datePublished": "2025-05-13"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

